<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판 예제</title>
    <link rel="stylesheet" href="wargame_log.css">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="main_log.html">팀 소개</a></li>
                <li><a href="wargame_log.html">워게임</a></li>
                <li><a href="announce_log.html">홍보 및 소식</a></li>
                <li class="right"><img src="../images/id_icon.svg" alt="User Icon" class="id-icon" id="userIcon">BOB님</li>
            </ul>
        </nav>
    </header>

    <!-- 메시지 박스 -->
    <div class="box">
        <div class="message">
            <p>BOB님<br>bob@gmail.com</br>현재 점수 ${score}</p>
            <div class="button_box">
                <button class="logout_button"><a href="../main.html">로그아웃</a></button>
                <button class="close_button">닫기</button>
            </div>
        </div>
    </div>

      <!-- 가운데 정렬된 이미지 추가 -->
    <div class="image-banner">
        <img src="../images/wargame_banner_notlog.svg" alt="Center Image" class="banner-image">
    </div>
    <div class="image-container">
        <img src="../images/github.png" alt="Center Image" class="center-image">
    </div>
 
    <!-- 깃헙 링크 -->
    <p><a href="wargame.html">워게임 환경구성 바로가기</a></p>


<!-- 아코디언 -->
<div class="accordion">
    <button class="btbt01">API<br>100</button>
    <div class="ppp">
        <h4>Insecure interfaces and APIs</h4>
        <form class="flag-form">
            <input type="text" id="flag1" name="flag1" placeholder="flag를 입력하세요">
            <button type="button" class="submit-btn" onclick="checkFlag(1)">제출</button>
        </form>
        <p class="feedback" id="feedback1"></p>
    </div>

    <button class="btbt02">VulnSWD<br>150</button>
    <div class="ppp">
        <h4>Insecure software development</h4>
        <form class="flag-form">
            <input type="text" id="flag2" name="flag2" placeholder="flag를 입력하세요">
            <button type="button" class="submit-btn" onclick="checkFlag(2)">제출</button>
        </form>
        <p class="feedback" id="feedback2"></p>
    </div>

    <button class="btbt03">워게임 3</button>
    <div class="ppp">
        <h4>내용 3</h4>
        <form class="flag-form">
            <label for="flag3">Flag 입력:</label>
            <input type="text" id="flag3" name="flag3" placeholder="Enter the flag">
            <button type="button" class="submit-btn" onclick="checkFlag(3)">제출</button>
        </form>
        <p class="feedback" id="feedback3"></p>
    </div>

    <button class="btbt04">워게임 4</button>
    <div class="ppp">
        <h4>내용 4</h4>
        <form class="flag-form">
            <label for="flag4">Flag 입력:</label>
            <input type="text" id="flag4" name="flag4" placeholder="Enter the flag">
            <button type="button" class="submit-btn" onclick="checkFlag(4)">제출</button>
        </form>
        <p class="feedback" id="feedback4"></p>
    </div>

    <button class="btbt05">워게임 5</button>
    <div class="ppp">
        <h4>내용 5</h4>
        <form class="flag-form">
            <label for="flag5">Flag 입력:</label>
            <input type="text" id="flag5" name="flag5" placeholder="Enter the flag">
            <button type="button" class="submit-btn" onclick="checkFlag(5)">제출</button>
        </form>
        <p class="feedback" id="feedback5"></p>
    </div>

    <button class="btbt06">워게임 6</button>
    <div class="ppp">
        <h4>내용 6</h4>
        <form class="flag-form">
            <label for="flag6">Flag 입력:</label>
            <input type="text" id="flag6" name="flag6" placeholder="Enter the flag">
            <button type="button" class="submit-btn" onclick="checkFlag(6)">제출</button>
        </form>
        <p class="feedback" id="feedback6"></p>
    </div>

    <button class="btbt07">워게임 7</button>
    <div class="ppp">
        <h4>내용 7</h4>
        <form class="flag-form">
            <label for="flag7">Flag 입력:</label>
            <input type="text" id="flag7" name="flag7" placeholder="Enter the flag">
            <button type="button" class="submit-btn" onclick="checkFlag(7)">제출</button>
        </form>
        <p class="feedback" id="feedback7"></p>
    </div>

    <button class="btbt08">워게임 8</button>
    <div class="ppp">
        <h4>내용 8</h4>
        <form class="flag-form">
            <label for="flag8">Flag 입력:</label>
            <input type="text" id="flag8" name="flag8" placeholder="Enter the flag">
            <button type="button" class="submit-btn" onclick="checkFlag(8)">제출</button>
        </form>
        <p class="feedback" id="feedback8"></p>
    </div>
</div>

<script>
    // 아이콘 클릭 시 메시지 박스 열기
    const userIcon = document.getElementById('userIcon');
    const box = document.querySelector('.box');
    const closeButton = document.querySelector('.close_button');

    userIcon.addEventListener('click', function() {
        box.classList.add('box_active');
    });

    closeButton.addEventListener('click', function() {
        box.classList.remove('box_active');
    });
</script>

<script>
    // 점수 저장 변수
    let score = 0;

    // 아코디언 기능 구현 (js)
    const buttons = document.querySelectorAll('.btbt01, .btbt02, .btbt03, .btbt04, .btbt05, .btbt06, .btbt07, .btbt08');
    buttons.forEach(button => {
        button.addEventListener('click', function() {
            if (this.disabled) return;

            const content = this.nextElementSibling;
            content.style.display = (content.style.display === 'block') ? 'none' : 'block';
        });
    });
</script>

<script>
    // 플래그 값 검증 (js)
    const flags = {
        1: "correct_flag1",
        2: "correct_flag2",
        3: "correct_flag3",
        4: "correct_flag4",
        5: "correct_flag5",
        6: "correct_flag6",
        7: "correct_flag7",
        8: "correct_flag8",
    };

    function checkFlag(index) {
        const input = document.getElementById(`flag${index}`);
        const feedback = document.getElementById(`feedback${index}`);
        const button = document.querySelector(`.btbt0${index}`);
        const enteredFlag = input.value.trim();

        if (enteredFlag === flags[index]) {
            feedback.textContent = "정답입니다!";
            feedback.style.color = "green";

           /* feedback.textcontent가 먼저 나타나고 이후 동작이 실행되도록 지연처리 */
            setTimeout(() => {

            // 버튼 비활성화 및 입력 필드 비활성화
            button.disabled = true;
            input.disabled = true;

            // 아코디언 내용 비활성화 (다시 열리지 않도록)
            const content = button.nextElementSibling;
            content.style.display = 'none';

            // 점수 증가
            score += (index * 50);  // 각 문제마다 50점씩 증가
            alert(`현재 점수: ${score}`);  // 점수 알림

                 }, 100); // settimeout으로 100ms 지연

        } 
        
        else {
            feedback.textContent = "틀렸습니다. 다시 시도하세요.";
            feedback.style.color = "red";
        }
    }
</script>


</body>
</html>
